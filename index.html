
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Travel Insights Web API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-d131df04.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-77e63c8b.png" class="logo" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#why-did-we-build-travel-insight-ti-api" class="toc-h2 toc-link" data-title="Why did we build Travel Insight (TI) API?">Why did we build Travel Insight (TI) API?</a>
                  </li>
                  <li>
                    <a href="#what-is-it" class="toc-h2 toc-link" data-title="What is it?">What is it?</a>
                  </li>
                  <li>
                    <a href="#why-use-it" class="toc-h2 toc-link" data-title="Why Use it?">Why Use it?</a>
                  </li>
                  <li>
                    <a href="#how-does-it-work" class="toc-h2 toc-link" data-title="How does it work?">How does it work?</a>
                  </li>
                  <li>
                    <a href="#aggregation-api-provides-two-endpoints-to-submit-analytics-queries" class="toc-h2 toc-link" data-title="Aggregation API provides two endpoints to submit analytics queries:">Aggregation API provides two endpoints to submit analytics queries:</a>
                  </li>
                  <li>
                    <a href="#some-questions-api-will-help-answer" class="toc-h2 toc-link" data-title="Some questions API will help answer">Some questions API will help answer</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#scope-of-api" class="toc-h1 toc-link" data-title="Scope of API">Scope of API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#supported-dimensions-used-in-both-filters-and-groupby-query-parameter" class="toc-h2 toc-link" data-title="Supported Dimensions (used in both filters and groupBy query parameter)">Supported Dimensions (used in both filters and groupBy query parameter)</a>
                  </li>
                  <li>
                    <a href="#supported-aggregations" class="toc-h2 toc-link" data-title="Supported Aggregations">Supported Aggregations</a>
                  </li>
                  <li>
                    <a href="#supported-query-criteria" class="toc-h2 toc-link" data-title="Supported Query Criteria">Supported Query Criteria</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-key-based-authentication" class="toc-h2 toc-link" data-title="API Key Based Authentication">API Key Based Authentication</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#aggregation-api" class="toc-h1 toc-link" data-title="Aggregation API">Aggregation API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#aggregated-exits" class="toc-h2 toc-link" data-title="Aggregated Exits">Aggregated Exits</a>
                  </li>
                  <li>
                    <a href="#aggregated-searches" class="toc-h2 toc-link" data-title="Aggregated Searches">Aggregated Searches</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <!-- Converted with the swagger-to-slate https://github.com/lavkumarv/swagger-to-slate -->
<h1 id='introduction'>Introduction</h1><h2 id='why-did-we-build-travel-insight-ti-api'>Why did we build Travel Insight (TI) API?</h2>
<p>Travel Insight (TI) Aggregation API is driven by our partners&#39; need to connect to a significantly easier alternative to the traditional, ad-hoc approaches of data collection and data analysis.</p>
<h2 id='what-is-it'>What is it?</h2>
<p>Travel Insight (TI) Aggregated API is a public API that enables subscribed partners to get an aggregated result of search and redirect data based on a set of queries. </p>
<h2 id='why-use-it'>Why Use it?</h2><h3 id='instant-results'>Instant Results</h3>
<p>There’s no additional data processing required, unlike with raw data files.</p>
<h3 id='easy-accessibility'>Easy Accessibility</h3>
<p>It’s easy to use and simple to plug into your Power BI tools. </p>
<h2 id='how-does-it-work'>How does it work?</h2>
<p>For a given Origin and Destination itinerary, Travel Insight API parses previously searched itineraries across an array of specified dates. The service is highly customisable and offers unsurpassed search criteria, including filtering such as multiple lengths of stay, number of stops, day of week, departure/arrival time window, etc.</p>
<h2 id='aggregation-api-provides-two-endpoints-to-submit-analytics-queries'>Aggregation API provides two endpoints to submit analytics queries:</h2>
<ul>
<li><p><strong>/searches:</strong> runs analytical query on searches data</p></li>
<li><p><strong>/exits:</strong> runs analytical query on exits (redirects) data</p></li>
</ul>

<p>You’ll find an in-depth explanation of both endpoints later in this document.</p>
<h2 id='some-questions-api-will-help-answer'>Some questions API will help answer</h2>
<ul>
<li>  Which were the most searched destinations from Nice in Nov 2020?</li>
<li>  Where were people flying to from Madrid during Oct 2020 and Jan 2020?</li>
<li>  What’s the probability that travellers will choose one flight over another (search-redirect tie-in)?</li>
<li>  For a given set of unique filter combinations (and/or), what’s the average exit fare in a given shop day or period?</li>
<li>  For a given set of unique filter combinations (and/or), what’s the average number of travellers choosing a specific route?</li>
<li>  Which were the most searched destinations from a given origin such as Nice in Nov 2020, or any period selected?</li>
<li>  Where were people flying to from an origin such as Madrid during Oct 2020 and Jan 2020?</li>
</ul>
<h1 id='scope-of-api'>Scope of API</h1><h2 id='supported-dimensions-used-in-both-filters-and-groupby-query-parameter'>Supported Dimensions (used in both filters and groupBy query parameter)</h2><h3 id='on-searches-data'>On searches data:</h3>
<ul>
<li>  <strong>market:</strong> Name of the country user has selected or Skyscanner domain being used</li>
<li>  <strong>originCountry:</strong> The country of the first leg&#39;s first segment</li>
<li>  <strong>destinationCountry:</strong> The destination country of the first leg&#39;s last segment</li>
<li>  <strong>originIATA:</strong> Origin IATA airport code</li>
<li>  <strong>destinationIATA:</strong> Destination IATA airport code</li>
<li>  <strong>cabinClass:</strong> Cabin class type, either ECONOMY, BUSINESS, PREMIUMECONOMY, FIRST</li>
<li>  <strong>departureDate:</strong> Departure date</li>
<li>  <strong>returnDate:</strong> Return date</li>
<li>  <strong>pax:</strong> Passenger count</li>
<li>  <strong>route:</strong> The first leg&#39;s origin city concatenated with the final leg&#39;s destination city.</li>
<li>  <strong>kind:</strong> Trip type. Either &#39;RETURN&#39;, &#39;ONE_WAY&#39; or &#39;MULTI_CITY&#39;</li>
<li><strong>daysBeforeTravel:</strong> How many days before travel the search happened</li>
<li><strong>travelMonth:</strong> Date of travel of the oubound leg in the format YYYYMM</li>
<li><strong>dayOfWeek:</strong> Day of the week of the oubound leg (Monday is 1)</li>
<li><strong>lengthOfTripInDays:</strong> Difference in days between the outbound and return leg of the trip</li>
<li><strong>travelType:</strong> One of DOMESTIC or INTERNATIONAL</li>
<li><strong>userCityLatitude:</strong> Latitude of the user location</li>
<li><strong>userCityLongitude:</strong> Longitude of the user location</li>
<li><strong>userCityName:</strong> City name of the user</li>
<li><strong>userCountryCode:</strong> Country code of the user</li>
<li><strong>userRegionCode:</strong> Region name of the user</li>
<li><strong>userRegionName:</strong> Region code of the user</li>
<li><strong>distanceToOriginInMetres:</strong> Distance in meters between the user location and the departing airport</li>
</ul>
<h3 id='on-exits-redirects-data'>On exits(<strong>redirects</strong>) data:</h3>
<ul>
<li><strong>market:</strong> Name of the country user has selected or Skyscanner domain being used</li>
<li><strong>originCountry:</strong> The country of the first leg&#39;s first segment</li>
<li><strong>destinationCountry:</strong> The destination country of the first leg&#39;s last segment</li>
<li><strong>originIATA:</strong> Origin IATA airport code</li>
<li><strong>destinationIATA:</strong> Destination IATA airport code</li>
<li><strong>cabinClass:</strong> Cabin class type, either ECONOMY, BUSINESS, PREMIUMECONOMY, FIRST</li>
<li><strong>departureDate:</strong> Departure date- <strong>returnDate:</strong> Return date</li>
<li><strong>departureTimeOfDay:</strong> Departure time of day. Either &#39;EARLY_MORNING&#39;, &#39;MORNING&#39;, &#39;AFTERNOON&#39;, &#39;EVENING&#39;. Early Morning (0000 to 0600), Morning (0600 to 1200), Afternoon (1200 to 1800), Evening (1800 to 2400)</li>
<li><strong>returnTimeOfDay:</strong> Return time of day. Either &#39;EARLY_MORNING&#39;, &#39;MORNING&#39;, &#39;AFTERNOON&#39;, &#39;EVENING&#39;. Early Morning (0000 to 0600), Morning (0600 to 1200), Afternoon (1200 to 1800), Evening (1800 to 2400)</li>
<li><strong>kind:</strong> Trip type. Either &#39;RETURN&#39;, &#39;ONE_WAY&#39; or &#39;MULTI_CITY&#39;</li>
<li><strong>marketingCarriers:</strong> Marketing carrier code</li>
<li><strong>stops:</strong> Number of stops</li>
<li><strong>route:</strong> The first leg&#39;s origin city concatenated with the final leg&#39;s destination city.</li>
<li><strong>pax:</strong> Passenger count</li>
<li><strong>journeyDuration:</strong> Journey duration in minutes</li>
<li><strong>departureTimeOfDay:</strong> One of MORNING, AFTERNOON, EVENING for the outbound leg</li>
<li><strong>returnTimeOfDay:</strong> One of MORNING, AFTERNOON, EVENING for the return leg</li>
<li><strong>marketingCarriers:</strong> List of carriers on the itinerary selected</li>
<li><strong>daysBeforeTravel:</strong> How many days before travel the redirect happened</li>
<li><strong>travelMonth:</strong> Date of travel of the oubound leg in the format YYYYMM</li>
<li><strong>dayOfWeek:</strong> Day of the week of the oubound leg (Monday is 1)</li>
<li><strong>firstMarketingCarrier:</strong> First carrier on the selected itinerary</li>
<li><strong>lengthOfTripInDays:</strong> Difference in days between the outbound and return leg of the trip</li>
<li><strong>travelType:</strong> One of DOMESTIC or INTERNATIONAL</li>
<li><strong>userCityLatitude:</strong> Latitude of the user location</li>
<li><strong>userCityLongitude:</strong> Longitude of the user location</li>
<li><strong>userCityName:</strong> City name of the user</li>
<li><strong>userCountryCode:</strong> Country code of the user</li>
<li><strong>userRegionCode:</strong> Region name of the user</li>
<li><strong>userRegionName:</strong> Region code of the user</li>
<li><strong>distanceToOriginInMetres:</strong> Distance in meters between the user location and the departing airport</li>
</ul>
<h2 id='supported-aggregations'>Supported Aggregations</h2><h3 id='on-searches-data-2'>On searches data</h3>
<ul>
<li>  <strong>count:</strong> Total number of rows matching given groupby combinations</li>
</ul>
<h3 id='on-redirects-data'>On redirects data</h3>
<ul>
<li>  <strong>count:</strong> Total number of rows matching given groupby combinations</li>
<li>  <strong>averageFarePerPax:</strong> Average fare price in USD per pax for rows matching given groupby combinations (can only be used alongside <code>count</code>)</li>
</ul>
<h2 id='supported-query-criteria'>Supported Query Criteria</h2>
<ul>
<li>  Max number of <code>filter</code>s allowed in a query: 11</li>
<li>  Max number of dimensions allowed in a <code>groupBy</code> query parameter: 3</li>
<li>  Max date interval supported in a query: 30 days, by default</li>
<li>  Max number of queries allowed in a minute: 1</li>
<li>  Partner&#39;s API key must be available in <code>API-Key</code> request header</li>
<li>Data is available for rolling 365 days in the past, by default.</li>
<li>  Maximum number of results returned in an API call is 100000 and the API does not support paging at this stage.</li>
<li>  Be aware that <strong>searches</strong> can be done on a city or airport level. Consider this when using the <strong>originIATA</strong> or <strong>destinationIATA</strong> filters. eg all searches for London should use the followings values: LHR, LCY, LGW, LTN, SEN (airport codes) <strong>and</strong> LON (IATA code for the city)</li>
</ul>
<h1 id='authentication'>Authentication</h1><h2 id='api-key-based-authentication'>API Key Based Authentication</h2>
<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Security scheme type:</td>
<td>API Key</td>
</tr>
<tr>
<td>Header parameter name:</td>
<td>API-Key</td>
</tr>
</tbody></table>
<h1 id='aggregation-api'>Aggregation API</h1>
<p><strong>API to serve analytical queries over searches and exits</strong></p>

<ul>
<li>  <strong>Production Server base URL:</strong> https://www.skyscanner.net/g/travel-insight-api/api/aggregation</li>
</ul>
<h2 id='aggregated-exits'>Aggregated Exits</h2>
<p><strong>POST</strong> <code>/exits</code></p>

<blockquote>
<p>Request samples</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"groupBy"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"aggregations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"count"</span><span class="p">,</span><span class="w"> </span><span class="s2">"averageFarePerPax"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response samples</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SG"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"aggregations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"averageFarePerPax"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"765.43"</span><span class="w">
        </span><span class="p">},</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>/exits</strong> endpoint supports 2 types of queries</p>

<ul>
<li><p>group by <strong>date</strong></p>

<ul>
<li>For this type of query users don’t have to provide any dimension in groupBy query parameter.</li>
<li>Returned response will have results grouped by date</li>
<li>Example: </li>
</ul>

<pre class="center-column-bullet"><strong>Request:</strong><br />curl -X POST https://www.skyscanner.net/g/travel-insight-api/api/aggregation/exits<br />with JSON body:<br />{<br /> "startDate": "2020-12-25",<br /> "endDate": "2020-12-26",<br /> "filter": "{market=SG}"<br />}<br />and your API-Key set in <strong>request headers</strong>.<br /><br />===========================================<br /><br /><strong>Response:<br /></strong>HTTP/1.1 200 OK<strong><br /></strong>Content-Type: application/json; charset=UTF-8<br /><br />{<br />  "results": [<br />    {<br />      "dimensions": [<br />        {<br />          "name": "date",<br />          "value": "2020-12-25",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 1500<br />        }<br />      ]<br />    },<br />    {<br />      "dimensions": [<br />        {<br />          "name": "date",<br />          "value": "2020-12-26",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 2000<br />        }<br />      ]<br />    }<br />  ]<br />}</pre></li>
<li><p>group by multiple dimension (supported: 3 max)</p>

<ul>
<li>For this type of query users can specify up to 3 dimensions in groupBy query</li>
<li>Returned response will have results grouped by provided dimensions</li>
<li>Example: </li>
</ul>

<pre class="center-column-bullet"><strong>Request:</strong><br />curl -X POST https://www.skyscanner.net/g/travel-insight-api/api/aggregation/exits<br />with JSON body:<br />{<br /> "startDate": "2020-12-25",<br /> "endDate": "2020-12-26",<br /> "filter": "{market=SG}",<br /> "groupBy": ["<span>originIATA</span>", "<span>destinationIATA</span>"]<br />}<br />and your API-Key set in <strong>request headers</strong>.<br /><br />===========================================<br /><br /><strong>Response:<br /></strong>HTTP/1.1 200 OK<strong><br /></strong>Content-Type: application/json; charset=UTF-8<br /><br />{<br />  "results": [<br />    {<br />      "dimensions": [<br />        {<br />          "name": "<span>originIATA</span>",<br />          "value": "LHR",<br />        },<br />        {<br />          "name": "<span>destinationIATA</span>",<br />          "value": "CDG",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 2134<br />        }<br />      ]<br />    },<br />    {<br />      "dimensions": [<br />        {<br />          "name": "originIATA",<br />          "value": "SIN",<br />        },<br />        {<br />          "name": "destinationIATA",<br />          "value": "LHR",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 2000<br />        }<br />      ]<br />    },<br />    {<br />      "dimensions": [<br />        {<br />          "name": "&ldquo;originIATA&rdquo;",<br />          "value": "CDG",<br />        },<br />        {<br />          "name": "&ldquo;destinationIATA&rdquo;",<br />          "value": "LHR",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 1200<br />        }<br />      ]<br />    }<br />  ]<br />}</pre></li>
</ul>

<p>In both type of queries only <code>startDate</code> and <code>endDate</code> are mandatory query parameters.</p>

<p><code>filter</code> and <code>groupBy</code> query parameters, on the other hand, are optional.</p>

<p>Supported filter format can be expressed with the following grammar:</p>

<pre class="center-column"><strong>EBNF grammar for filter structure:</strong><br /><br />&lt;filter&gt; ::= "{" &lt;fieldTokens&gt; ("," &lt;fieldTokens&gt;)* "}";<br /><br />&lt;fieldTokens&gt; ::= &lt;fieldName&gt; "=" &lt;fieldValue&gt; | &lt;fieldRangeToken&gt;;<br /><br />&lt;fieldRangeToken&gt; ::= &lt;fieldName&gt; ("<" | "<=" | ">" | ">=") &lt;value&gt;;<br /><br />&lt;fieldValue&gt; ::= valueToken;<br /><br />&lt;valueToken&gt; ::= &lt;value&gt; | "(" &lt;value&gt; (&lt;operator&gt; valueToken)* ")"<br /><br />&lt;operator&gt; ::= "|";<br /><br />&lt;fieldName&gt; ::= "originCountry" | "<span>destinationCountry</span>" | "<span>originIATA</span>" | "<span>destinationIATA</span>" | "<span>market</span>" <br /> | "<span>cabinClass</span>" | "<span>departureDate</span>" | "<span>returnDate</span>" | "<span>pax</span>" | "<span>journeyDuration</span>" |"<span>route</span>" | "<span>kind</span>" |  "<span>departureTimeOfDay"<br /></span> | "<span>returnTimeOfDay" | "marketingCarriers" | "stops" </span>;<br /><br />&lt;value&gt; ::= string | integer | date | datetime;<br /><br /><br /><strong>Semantics:<br /></strong>&lt;operator&gt; "|" represents logical OR (||)<strong><br />EBNF syntax:</strong> * for "zero or more" occurrences<br /><br />Range operators allowed only for pax, stops, departureDate, returnDate, journeyDuration <br /><br /><strong>Example:</strong> filter={market=(UK|FR),<span>originIATA</span>=LHR,<span>destinationIATA</span>=(CDG|ORY),<span>pax</span>>1,<span>pax</span><=5}</pre>

<p><font color="red"><em>Please note that there should not be any spaces between filter tokens</em></font></p>
<h3 id='responses'>Responses</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Aggregated results returned</td>
</tr>
<tr>
<td>400</td>
<td>Request validation failure -  Invalid input syntax</td>
</tr>
<tr>
<td>401</td>
<td>Unsuccessful authentication</td>
</tr>
<tr>
<td>422</td>
<td>Request validation failure - Malformed semantics in input</td>
</tr>
<tr>
<td>429</td>
<td>Too many requests</td>
</tr>
<tr>
<td>500</td>
<td>Failure to process the request</td>
</tr>
</tbody></table>
<h2 id='aggregated-searches'>Aggregated Searches</h2>
<p><strong>POST</strong> <code>/searches</code></p>

<blockquote>
<p>Request samples</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"groupBy"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"aggregations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"count"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response samples</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SG"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"aggregations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>/searches</strong> endpoint supports 2 types of queries</p>

<ul>
<li><p>group by <strong>date</strong></p>

<ul>
<li>For this type of query users don’t have to provide any dimension in groupBy query parameter.</li>
<li>Returned response will have results grouped by date</li>
<li>Example: </li>
</ul>

<pre class="center-column-bullet"><strong>Request:</strong><br />curl -X POST https://www.skyscanner.net/g/travel-insight-api/api/aggregation/exits<br />with JSON body:<br />{<br /> "startDate": "2020-12-25",<br /> "endDate": "2020-12-26",<br /> "filter": "{market=SG}"<br />}<br />and your API-Key set in <strong>request headers</strong>.<br /><br />===========================================<br /><br /><strong>Response:<br /></strong>HTTP/1.1 200 OK<strong><br /></strong>Content-Type: application/json; charset=UTF-8<br /><br />{<br />  "results": [<br />    {<br />      "dimensions": [<br />        {<br />          "name": "date",<br />          "value": "2020-12-25",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 1500<br />        }<br />      ]<br />    },<br />    {<br />      "dimensions": [<br />        {<br />          "name": "date",<br />          "value": "2020-12-26",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 2000<br />        }<br />      ]<br />    }<br />  ]<br />}</pre></li>
<li><p>group by multiple dimension (supported: 3 max)</p>

<ul>
<li>For this type of query users can specify up to 3 dimensions in groupBy query</li>
<li>Returned response will have results grouped by provided dimensions</li>
<li>Example: </li>
</ul>

<pre class="center-column-bullet"><strong>Request:</strong><br />curl -X POST https://www.skyscanner.net/g/travel-insight-api/api/aggregation/exits<br />with JSON body:<br />{<br /> "startDate": "2020-12-25",<br /> "endDate": "2020-12-26",<br /> "filter": "{market=SG}",<br /> "groupBy": ["<span>originIATA</span>", "<span>destinationIATA</span>"]<br />}<br />and your API-Key set in <strong>request headers</strong>.<br /><br />===========================================<br /><br /><strong>Response:<br /></strong>HTTP/1.1 200 OK<strong><br /></strong>Content-Type: application/json; charset=UTF-8<br /><br />{<br />  "results": [<br />    {<br />      "dimensions": [<br />        {<br />          "name": "<span>originIATA</span>",<br />          "value": "LHR",<br />        },<br />        {<br />          "name": "<span>destinationIATA</span>",<br />          "value": "CDG",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 2134<br />        }<br />      ]<br />    },<br />    {<br />      "dimensions": [<br />        {<br />          "name": "originIATA",<br />          "value": "SIN",<br />        },<br />        {<br />          "name": "destinationIATA",<br />          "value": "LHR",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 2000<br />        }<br />      ]<br />    },<br />    {<br />      "dimensions": [<br />        {<br />          "name": "&ldquo;originIATA&rdquo;",<br />          "value": "CDG",<br />        },<br />        {<br />          "name": "&ldquo;destinationIATA&rdquo;",<br />          "value": "LHR",<br />        }<br />      ],<br />      "aggregations": [<br />        {<br />          "name": "count",<br />          "value": 1200<br />        }<br />      ]<br />    }<br />  ]<br />}</pre></li>
</ul>

<p>In both type of queries only <code>startDate</code> and <code>endDate</code> are mandatory query parameters.</p>

<p><code>filter</code> and <code>groupBy</code> query parameters, on the other hand, are optional.</p>

<p>Supported filter format can be expressed with the following grammar:</p>

<pre class="center-column"><strong>EBNF grammar for filter structure:</strong><br /><br />&lt;filter&gt; ::= "{" &lt;fieldTokens&gt; ("," &lt;fieldTokens&gt;)* "}";<br /><br />&lt;fieldTokens&gt; ::= &lt;fieldName&gt; "=" &lt;fieldValue&gt; | &lt;fieldRangeToken&gt;;<br /><br />&lt;fieldRangeToken&gt; ::= &lt;fieldName&gt; ("<" | "<=" | ">" | ">=") &lt;value&gt;;<br /><br />&lt;fieldValue&gt; ::= valueToken;<br /><br />&lt;valueToken&gt; ::= &lt;value&gt; | "(" &lt;value&gt; (&lt;operator&gt; valueToken)* ")"<br /><br />&lt;operator&gt; ::= "|";<br /><br />&lt;fieldName&gt; ::= "originCountry" | "<span>destinationCountry</span>" | "<span>originIATA</span>" | "<span>destinationIATA</span>" <br /> | "<span>market</span>" | "<span>cabinClass</span>" | "<span>departureDate</span>" | "<span>returnDate</span>" | "<span>pax</span>" | "<span>route</span>" | "<span>kind</span>" ;<br /><br />&lt;value&gt; ::= string | integer | date | datetime;<br /><br /><br /><strong>Semantics:<br /></strong>&lt;operator&gt; "|" represents logical OR (||)<strong><br />EBNF syntax:</strong> * for "zero or more" occurrences<br /><br />Range operators allowed only for pax, departureDate, returnDate<br /><br /><strong>Example:</strong> filter={market=(UK|FR),<span>originIATA</span>=LHR,<span>destinationIATA</span>=(CDG|ORY),<span>pax</span>>1,<span>pax</span><=5}</pre>

<p><font color="red"><em>Please note that there should not be any spaces between filter tokens</em></font></p>
<h3 id='responses'>Responses</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Aggregated results returned</td>
</tr>
<tr>
<td>400</td>
<td>Request validation failure -  Invalid input syntax</td>
</tr>
<tr>
<td>401</td>
<td>Unsuccessful authentication</td>
</tr>
<tr>
<td>422</td>
<td>Request validation failure - Malformed semantics in input</td>
</tr>
<tr>
<td>429</td>
<td>Too many requests</td>
</tr>
<tr>
<td>500</td>
<td>Failure to process the request</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
